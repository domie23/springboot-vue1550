(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b8f68ac"],{"1d3b":function(s,t,e){},"216f":function(s,t,e){"use strict";var i=function(){var s=this,t=s._self._c;return t("div",{staticClass:"list_menu"},s._l(s.list_info,(function(e,i){return t("router-link",{key:i,staticClass:"menu_item",class:{selected:e.selected},attrs:{to:e.url}},[t("span",{staticClass:"left_span"},[s._v(s._s(e.title))]),t("span",{staticClass:"right_span"},[t("b-icon",{attrs:{icon:e.icon}})],1)])})),1)},a=[],l={props:{list_info:{type:Array,default(){return[{title:"个人资料",url:"/user/info",icon:"house-fill",selected:!1},{title:"密码修改",url:"/user/password",icon:"person-fill",selected:!1},{title:"收货地址",url:"/user/address",icon:"map-fill",selected:!1},{title:"收藏",url:"/user/collect",icon:"heart-fill",selected:!1},{title:"订单",url:"/order/list",icon:"file-earmark-minus-fill",selected:!1},{title:"购物车",url:"/cart/list",icon:"cart-fill",selected:!1}]}}},methods:{},components:{}},r=l,d=(e("edc5"),e("0b56")),n=Object(d["a"])(r,i,a,!1,null,"4b7714c6",null);t["a"]=n.exports},"929f":function(s,t,e){},"946a":function(s,t,e){},cc18:function(s,t,e){"use strict";e.r(t);var i=function(){var s=this,t=s._self._c;return t("div",{staticClass:"page_user",attrs:{id:"user_address"}},[t("div",{staticClass:"warp"},[t("div",{staticClass:"container"},[t("div",{staticClass:"row justify-content-between"},[t("div",{staticClass:"col-12 col-md-3"},[t("div",{staticClass:"card_menu"},[t("list_menu_user",{attrs:{list_info:s.list_info}})],1)]),t("div",{staticClass:"col-12 col-md-9"},[t("div",{staticClass:"card_address pl-2"},[s._m(0),s.$check_action("/address/list","get")?t("list_address",{attrs:{list:s.list}}):s._e()],1)])])])])])},a=[function(){var s=this,t=s._self._c;return t("div",[t("span",[s._v("收货地址")])])}],l=e("c6e7"),r=e("216f"),d=function(){var s=this,t=s._self._c;return t("div",{staticClass:"list_address"},[s._l(s.list,(function(e,i){return t("div",{key:i,staticClass:"address_card"},[t("div",{staticClass:"address_info"},[t("div",{staticClass:"address_top"},[t("div",{staticClass:"address_content"},[t("div",{staticClass:"name"},[t("span",[s._v(s._s(e[s.vm.name]))])]),t("div",{staticClass:"tag"},[t("span",{staticClass:"tag_default",class:{show:e[s.vm.default],hide:!e[s.vm.default]}},[s._v("默认")])]),t("div",{staticClass:"phone"},[t("span",[s._v(s._s(e[s.vm.phone]))])])]),t("div",{staticClass:"btn_show"},[t("button",{on:{click:function(t){return s.more_show(e,i)}}},[s._v(" "+s._s(e[s.vm.display_btn]?"折叠":"展开")+" ")])])]),t("div",{staticClass:"address_bottom"},[t("span",[s._v(" "+s._s(e[s.vm.address])+" ")])])]),e[s.vm.display_btn]?t("div",{staticClass:"bar_btn"},[s.$check_action("/address/list","set")?t("button",{on:{click:function(t){return s.choose_default(e,i)}}},[t("span",[s._v("设为默认")])]):s._e(),s.$check_action("/address/list","del")?t("button",{on:{click:function(t){return s.del_address(e,i)}}},[t("span",[s._v("删除")])]):s._e(),s.$check_action("/address/list","set")?t("button",{on:{click:function(t){return s.$router.push("./address_edit?address_id="+e[s.vm.address_id])}}},[t("span",[s._v("编辑")])]):s._e()]):s._e()])})),s.$check_action("/address/list","add")?t("div",{staticClass:"btn_address",on:{click:function(t){return s.$router.push("./address_edit")}}},[s._v("+ 新建收货地址 ")]):s._e()],2)},n=[],c={name:"list_address",props:{list:{type:Array,default:function(){return[{name:"",phone:"",address:"",user_id:0,address_id:0,default:0,display_btn:"display_btn"}]}},vm:{type:Object,default:function(){return{name:"name",phone:"phone",address:"address",user_id:"user_id",address_id:"address_id",default:"default",display_btn:"display_btn"}}}},data(){return{}},methods:{async choose_default(s,t){var e=this,i=s.user_id,a=s.address_id,l=await this.$post("~/api/address/set?user_id="+i,{default:0});l.result?(this.list.map(s=>s.default=0),this.$post(`~/api/address/set?user_id=${i}&address_id=${a}`,{default:1},s=>{s.result?(e.list[t].default=1,this.$toast("修改默认地址成功！")):s.error&&(console.log(s.error),this.$toast(s.error.message))})):l.error&&(console.log(l.error),this.$toast(json.error.message))},del_address(s,t){this.$get("~/api/address/del",{address_id:s.address_id},s=>{s.result?(this.list.splice(t,1),this.$toast("删除地址成功！")):s.error&&(console.log(s.error),this.$toast(json.error.message))})},more_show(s,t){s.display_btn=!s.display_btn,this.$set(this.list,t,s)}}},o=c,u=(e("efbc"),e("0b56")),_=Object(u["a"])(o,d,n,!1,null,null,null),f=_.exports,p={mixins:[l["a"]],data(){return{list:[],url_get_list:"~/api/address/get_list?",query:{user_id:0},list_info:[{title:"个人资料",url:"/user/info",icon:"house-fill",selected:!1},{title:"密码修改",url:"/user/password",icon:"person-fill",selected:!1},{title:"收货地址",url:"/user/address",icon:"map-fill",selected:!0},{title:"收藏",url:"/user/collect",icon:"heart-fill",selected:!1},{title:"订单",url:"/order/list",icon:"file-earmark-minus-fill",selected:!1},{title:"购物车",url:"/cart/list",icon:"cart-fill",selected:!1}]}},methods:{get_list_before(s){return s.user_id=this.$store.state.user.user_id,s},get_list_after(s){s.result&&s.result.list&&s.result.list.map(s=>{s.display_btn=!1})}},components:{list_menu_user:r["a"],list_address:f}},v=p,h=(e("df25"),Object(u["a"])(v,i,a,!1,null,"5ff1ee6c",null));t["default"]=h.exports},df25:function(s,t,e){"use strict";e("1d3b")},edc5:function(s,t,e){"use strict";e("929f")},efbc:function(s,t,e){"use strict";e("946a")}}]);
//# sourceMappingURL=chunk-5b8f68ac.30d7711f.js.map