(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ce85087"],{"017f":function(t,s,e){},1662:function(t,s,e){"use strict";e("b6fe")},3698:function(t,s,e){"use strict";e.r(s);var r=function(){var t=this,s=t._self._c;return s("div",{staticClass:"page_order",attrs:{id:"order_list"}},[t.$check_action("/order/list","get")?s("div",{staticClass:"warp"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-10"},[s("div",{staticClass:"card_goods_list"},[s("h4",[t._v("我的订单")]),s("div",{staticClass:"filter_block"},[s("div",{staticClass:"bar_sort",class:{active:"`price` desc"==t.query.orderby}},[s("b-dropdown",{attrs:{text:"排序",variant:"outline-dark",left:""}},[s("b-dropdown-item",{on:{click:function(s){return t.sort_order_desc()}}},[t._v(" 价格从高到低 ")]),s("b-dropdown-item",{on:{click:function(s){return t.sort_order_asc()}}},[t._v(" 价格从低到高 ")]),t._l(t.sort_list,(function(e,r){return s("b-dropdown-item",{key:r,on:{click:function(s){return t.sort_order(e)}}},[t._v(" "+t._s(e.name)+" ")])}))],2)],1),s("div",{staticClass:"bar_sort",class:{active:"`price` desc"==t.query.orderby}},[s("b-dropdown",{attrs:{text:"订单状态",variant:"outline-dark",left:""}},t._l(t.state_list,(function(e,r){return s("b-dropdown-item",{key:r,on:{click:function(s){return t.state_filter(e)}}},[t._v(" "+t._s(e)+" ")])})),1)],1)]),s("list_order",{attrs:{list:t.list_diff}})],1)])])])]):t._e()])},i=[],c=function(){var t=this,s=t._self._c;return s("div",{staticClass:"list_order"},t._l(t.list,(function(e,r){return s("div",{key:r,staticClass:"item_order"},[s("div",{staticClass:"state"},[t._v(" "+t._s(e.state)+" ")]),t._l(e.list,(function(r,i){return s("div",{key:i,staticClass:"goods_list"},[s("router-link",{staticClass:"item_goods flex_sbc",attrs:{to:"./details?order_number="+e.order_number}},[s("div",{staticClass:"img_block"},[s("img",{staticStyle:{width:"4.5rem",height:"4.5rem"},attrs:{src:t.$fullUrl(r[t.vm.img]),mode:"scaleToFill"}})]),s("div",{staticClass:"middle_info"},[s("div",{staticClass:"title"},[t._v(" "+t._s(r[t.vm.title])+" ")]),s("div",{staticClass:"description"},[t._v(" "+t._s(r[t.vm.description])+" ")])]),s("div",{staticClass:"right_info"},[s("div",{staticClass:"price"},[t._v("￥"+t._s(r[t.vm.price]))]),s("div",{staticClass:"num"},[t._v("×"+t._s(r[t.vm.num]))])])])],1)})),s("div",{staticClass:"sum_price flex_sbc"},[s("span",[t._v("实付：￥"+t._s(e.sum_price))]),s("b-button",{staticClass:"btn_del",attrs:{type:"default",size:"mini"},on:{click:function(s){return t.del_order(e.order_number,r)}}},[s("b-icon",{attrs:{icon:"trash"}})],1)],1)],2)})),0)},a=[],o={props:{list:{type:Array,default:function(){return[]}},vm:{type:Object,default:function(){return{order_number:"order_number",title:"title",img:"img",price:"price",price_ago:"price_ago",price_count:"price_count",num:"num",goods_id:"goods_id",description:"description",contact_name:"contact_name",contact_phone:"contact_phone",contact_address:"contact_address",postal_code:"postal_code",user_id:"user_id"}}}},data(){return{}},methods:{del_order(t,s){this.$get("~/api/order/del",{order_number:t},t=>{this.list.splice(s,1)})}}},n=o,_=(e("1662"),e("0b56")),d=Object(_["a"])(n,c,a,!1,null,"33ce35f5",null),l=d.exports,u=e("c6e7"),p={mixins:[u["a"]],components:{list_order:l},data(){return{oauth:{signIn:!0,user_group:[]},url_get_list:"~/api/order/get_list",list_diff:[],query:{user_id:this.$store.state.user.user_id},list_order_type:[],sort_list:[{name:"更新时间从高到低",value:"`create_time` desc"},{name:"更新时间从低到高",value:"`create_time` asc"}],state_list:["全部","待付款","已付款"]}},methods:{sort_order(t){this.query.orderby=t.value,this.search()},state_filter(t){this.query.state="全部"==t?"":t,this.get_list()},compare_asc(t){return function(s,e){var r=s[t],i=e[t];return r-i}},compare_desc(t){return function(s,e){var r=s[t],i=e[t];return i-r}},sort_order_asc(){this.list_diff.sort(this.compare_asc("sum_price"))},sort_order_desc(){this.list_diff.sort(this.compare_desc("sum_price"))},get_list_before(t){return t.user_id=this.$store.state.user.user_id,t},get_list_after(t){var s=[],e="",r=-1;return t.result.list.map(t=>{if(t.order_number===e)s[r]["list"].push(t),s[r]["sum_price"]+=t.price_count;else{r+=1,e=t.order_number,s[r]={};var i=s[r];i["create_time"]=t.create_time,i["order_number"]=e,i["list"]=[],i["list"].push(t),i["sum_price"]=t.price_count,i["state"]=t.state}}),this.list_diff=s,t}}},m=p,f=(e("aac6"),Object(_["a"])(m,r,i,!1,null,"ce701744",null));s["default"]=f.exports},aac6:function(t,s,e){"use strict";e("017f")},b6fe:function(t,s,e){}}]);
//# sourceMappingURL=chunk-5ce85087.d113abc3.js.map