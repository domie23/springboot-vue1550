{"version":3,"sources":["webpack:///./src/views/cart/list.vue?be54","webpack:///./src/views/cart/list.vue","webpack:///./src/components/diy/list_cart.vue","webpack:///src/components/diy/list_cart.vue","webpack:///./src/components/diy/list_cart.vue?014c","webpack:///./src/components/diy/list_cart.vue?3a81","webpack:///src/views/cart/list.vue","webpack:///./src/views/cart/list.vue?4661","webpack:///./src/views/cart/list.vue?53ba","webpack:///./src/components/diy/list_cart.vue?7a9e"],"names":["render","_vm","this","_c","_self","staticClass","attrs","_v","list","on","$event","del","staticRenderFns","_l","o","i","key","class","active","vm","selected","select_func","_e","$fullUrl","img","_s","title","del_cart","price","price_ago","sub_num","num","add_num","$check_action","select_all_flag","select_all","staticStyle","count","settle_all","props","type","default","cart_id","user_id","state","price_count","goods_id","description","data","sum_price","computed","methods","selectedAll","res","order_code","orderCode","obj","order_number","console","resolve","flag","is_wx_env","component","mixins","components","list_cart","url_get_list","query","page","size","list_cart_type","get_list_before","param","get_list_after"],"mappings":"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","file":"js/chunk-72829e79.cfc7e1e4.js","sourcesContent":["export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/_vue-loader@15.10.0@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=style&index=0&id=16cc0548&prod&scoped=true&lang=css&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"page_cart\",attrs:{\"id\":\"cart_index\"}},[_c('div',{staticClass:\"warp\"},[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col\"},[_c('div',{staticClass:\"card\"},[_c('h4',[_vm._v(\"我的购物车\")]),_c('list_cart',{attrs:{\"list\":_vm.list}})],1),_c('button',{on:{\"click\":function($event){return _vm.del()}}},[_vm._v(\"删除\")])])])])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"cart_block\"},[_c('div',{staticClass:\"list_cart\"},_vm._l((_vm.list),function(o,i){return _c('div',{key:i,staticClass:\"item_cart\"},[_c('div',{staticClass:\"choose_btn\",class:{ active: o[_vm.vm.selected] },on:{\"click\":function($event){return _vm.select_func(o,i)}}},[_c('div',{staticClass:\"btn_circle\"},[_c('span',{staticClass:\"icon_wrap\"},[(o[_vm.vm.selected])?_c('b-icon',{attrs:{\"icon\":\"check\"}}):_vm._e()],1)])]),_c('div',{staticClass:\"cart_body\"},[_c('div',{staticClass:\"img_block\"},[_c('img',{attrs:{\"src\":_vm.$fullUrl(o[_vm.vm.img])}})]),_c('div',{staticClass:\"right_info\"},[_c('div',{staticClass:\"title ellipsis_2\"},[_vm._v(\" \"+_vm._s(o[_vm.vm.title])+\" \")]),_c('div',{staticClass:\"btn_del\",on:{\"click\":function($event){return _vm.del_cart(o, i)}}},[_c('b-icon',{staticClass:\"icon_del\",attrs:{\"type\":\"trash\",\"color\":\"var(--color_grey)\",\"icon\":\"trash\"}})],1),_c('div',{staticClass:\"bottom_price\"},[_c('div',{staticClass:\"price\"},[_c('span',[_vm._v(\"￥\"+_vm._s(o[_vm.vm.price]))]),_c('span',{staticClass:\"price_ago\"},[_vm._v(\"￥\"+_vm._s(o[_vm.vm.price_ago]))])]),_c('div',{staticClass:\"handle_num\"},[_c('div',{staticClass:\"subtract\",on:{\"click\":function($event){return _vm.sub_num(o, i)}}},[_c('span',[_vm._v(\"-\")])]),_c('div',{staticClass:\"num\"},[_vm._v(\" \"+_vm._s(o[_vm.vm.num])+\" \")]),_c('div',{staticClass:\"add\",on:{\"click\":function($event){return _vm.add_num(o)}}},[_c('span',[_vm._v(\"+\")])])])])])])])}),0),(_vm.$check_action('/order/list', 'add'))?_c('div',{staticClass:\"bar_settle\"},[_c('div',{staticClass:\"choose_btn\",class:{ active: _vm.select_all_flag },on:{\"click\":function($event){return _vm.select_all()}}},[_c('div',{staticClass:\"btn_circle\"},[(_vm.select_all_flag)?_c('b-icon',{staticStyle:{\"color\":\"#fff\",\"font-size\":\"0.3rem\"},attrs:{\"icon\":\"check\"}}):_vm._e()],1),_c('span',[_vm._v(\"全选\")])]),_c('div',{staticClass:\"right_settle\"},[_c('div',{staticClass:\"sum_block\"},[_c('span',[_vm._v(\"共计：\")]),_c('span',{staticClass:\"sum\"},[_vm._v(\"￥\"+_vm._s(_vm.count()))])]),_c('div',{staticClass:\"settle\"},[_c('button',{staticClass:\"btn_settle\",attrs:{\"color\":\"#fff\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.settle_all()}}},[_vm._v(\" 购买 \")])])])]):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"cart_block\">\n    <div class=\"list_cart\">\n      <div class=\"item_cart\" v-for=\"(o, i) in list\" :key=\"i\">\n        <!-- 选择按钮 -->\n        <div\n          class=\"choose_btn\"\n          :class=\"{ active: o[vm.selected] }\"\n          @click=\"select_func(o,i)\"\n        >\n          <div class=\"btn_circle\">\n            <span class=\"icon_wrap\">\n              <b-icon v-if=\"o[vm.selected]\" icon=\"check\"></b-icon>\n            </span>\n          </div>\n        </div>\n        <div class=\"cart_body\">\n          <div class=\"img_block\">\n            <img :src=\"$fullUrl(o[vm.img])\" />\n          </div>\n\n          <div class=\"right_info\">\n            <div class=\"title ellipsis_2\">\n              {{ o[vm.title] }}\n            </div>\n            <!-- 删除商品 -->\n             <!-- v-if=\"$check_action('/cart/list', 'del')\" -->\n            <div\n              class=\"btn_del\"\n              @click=\"del_cart(o, i)\"\n            >\n              <b-icon\n                type=\"trash\"\n                class=\"icon_del\"\n                color=\"var(--color_grey)\"\n                icon=\"trash\"\n              ></b-icon>\n            </div>\n            <!-- v-if=\"$check_action('/cart/details', 'set')\" -->\n            <div class=\"bottom_price\">\n              <div class=\"price\">\n                <span>￥{{ o[vm.price] }}</span>\n                <span class=\"price_ago\">￥{{ o[vm.price_ago] }}</span>\n              </div>\n              <div\n                class=\"handle_num\"\n              >\n                <div class=\"subtract\" @click=\"sub_num(o, i)\">\n                  <span>-</span>\n                </div>\n                <div class=\"num\">\n                  {{ o[vm.num] }}\n                </div>\n                <div class=\"add\" @click=\"add_num(o)\">\n                  <span>+</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- 全选 -->\n    <div class=\"bar_settle\" v-if=\"$check_action('/order/list', 'add')\">\n      <div\n        class=\"choose_btn\"\n        :class=\"{ active: select_all_flag }\"\n        @click=\"select_all()\"\n      >\n        <div class=\"btn_circle\">\n          <b-icon\n            style=\"color: #fff; font-size: 0.3rem\"\n            v-if=\"select_all_flag\"\n            icon=\"check\"\n          ></b-icon>\n        </div>\n        <span>全选</span>\n      </div>\n      <div class=\"right_settle\">\n        <div class=\"sum_block\">\n          <span>共计：</span>\n          <span class=\"sum\">￥{{ count() }}</span>\n        </div>\n        <div class=\"settle\">\n          <button\n            class=\"btn_settle\"\n            color=\"#fff\"\n            @click=\"settle_all()\"\n            size=\"mini\"\n          >\n            购买\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import  axios from \"axios\"\nexport default {\n  props: {\n    list: {\n      type: Array,\n      default: function () {\n        return [];\n      },\n    },\n    vm: {\n      type: Object,\n      default: function () {\n        return {\n          cart_id: \"cart_id\",\n          title: \"title\",\n          img: \"img\",\n          user_id: \"user_id\",\n          state: \"state\",\n          price: \"price\",\n          price_ago: \"price_ago\",\n          price_count: \"price_count\",\n          num: \"num\",\n          goods_id: \"goods_id\",\n          description: \"description\",\n          selected: \"selected\",\n        };\n      },\n    },\n  },\n  data() {\n    return {\n      sum_price: 0,\n      select_all_flag:false\n    };\n  },\n  computed: {\n  },\n  methods: {\n    count() {\n      var sum_price = 0;\n      this.list.map((o) => {\n        if (o.selected) {\n          sum_price = parseFloat(sum_price) + parseFloat(o.price_count);\n        }\n      });\n      return sum_price;\n    },\n    selectedAll() {\n      return this.list.every((o) => o.selected);\n    },\n    /**\n     * 增加数量\n     * @param {Object} obj 商品对象\n     */\n    add_num(obj) {\n      var { cart_id, num, price, price_count } = obj;\n      num = parseInt(num) + 1;\n      price_count = parseFloat(price_count) + parseFloat(price);\n      this.$post(\n        `~/api/cart/set?cart_id=${cart_id}`,\n        {\n          num,\n          price,\n          price_count,\n        },\n        (res) => {\n          this.list.map((o) => {\n            if (o.cart_id === cart_id) {\n              (o.num = num), (o.price_count = price_count);\n            }\n          });\n        }\n      );\n    },\n    /**\n     * 减少数量\n     * @param { Object } obj 商品对象\n     * @param { Object} i 规定删除项目的位置\n     */\n    sub_num(obj, i) {\n      var { cart_id, num, price, price_count } = obj;\n      num = parseInt(num) - 1;\n      price_count = parseFloat(price_count) - parseFloat(price);\n      if (num === 0) {\n        this.$get(`~/api/cart/del?cart_id=${cart_id}`, {}, (res) => {\n          this.list.splice(i, 1);\n        });\n      } else {\n        this.$post(\n          `~/api/cart/set?cart_id=${cart_id}`,\n          {\n            num,\n            price,\n            price_count,\n          },\n          (res) => {\n            this.list.map((o) => {\n              if (o.cart_id === cart_id) {\n                o.num = num;\n                o.price_count = price_count;\n              }\n            });\n          }\n        );\n      }\n    },\n    /**\n     * 删除购物车\n     * @param { Object } obj 商品对象\n     * @param { Number} i 规定删除项目的位置\n     */\n    del_cart(o, i) {\n      this.$get(`~/api/cart/del?cart_id=${o.cart_id}`, {}, (res) => {\n        this.list.splice(i, 1);\n      });\n    },\n    /**\n     * 选择\n     * @param { Object } o 选择对象\n     */\n    select_func(o,i) {\n      o.selected = !o.selected;\n      this.$set(this.list,i,o);\n      this.select_all_flag =this.selectedAll();\n    },\n    /**\n     * 全选\n     */\n    select_all() {\n      if (this.selectedAll()) {\n        this.list.map((o) => {\n          o.selected = false;\n        });\n        this.select_all_flag = false;\n      } else {\n        this.list.map((o) => {\n          o.selected = true;\n        });\n        this.select_all_flag = true;\n      }\n    },\n    /**\n     * 根据当前时间和随机数生成流水号\n     */\n    order_code() {\n      var orderCode = \"\";\n      for (\n        var i = 0;\n        i < 6;\n        i++ //6位随机数，用以加在时间戳后面。\n      ) {\n        orderCode += Math.floor(Math.random() * 10);\n      }\n      orderCode = new Date().getTime() + orderCode; //时间戳，用来生成订单号。\n      return orderCode;\n    },\n    /**\n     * 异步单个结算\n     * @param { Object } obj 结算对象\n     * @param { Number } index 规定删除项目的位置\n     * @param { Object } order_number 订单编号\n     */\n    async settle_one(obj, index, order_number,address) {\n      // 获取被选中的商品\n      var {\n        title,\n        img,\n        price,\n        price_ago,\n        price_count,\n        num,\n        type,\n        goods_id,\n        description,\n        user_id,\n        cart_id,\n      } = obj;\n      // 请求参数\n      var body = {\n        order_number,\n        title,\n        img,\n        price,\n        price_ago,\n        price_count,\n        num,\n        type,\n        goods_id,\n        description,\n        \"contact_name\":address.obj.name,\n        \"contact_phone\":address.obj.phone,\n        \"contact_address\":address.obj.address,\n        \"postal_code\":address.obj.postcode,\n        user_id,\n      };\n      console.log(body)\n      // 延迟发送添加订单请求\n      await new Promise((resolve, reject) => {\n        this.$post(\"~/api/order/add?\", body, (res) => {\n          if (res.result) {\n            resolve();\n          }\n        });\n      });\n      //删除购物车\n      await new Promise((resolve, reject) => {\n        this.$get(\n          \"~/api/cart/del?\",\n          {\n            cart_id,\n          },\n          (res) => {\n            if (res.result) {\n              this.list.splice(index, 1);\n              resolve();\n            }\n          }\n        );\n      });\n    },\n    /**\n     * 选中的结算\n     */\n    async settle_all() {\n      // 查询库存\n      let flag = false;\n      for (let i=0;i<this.list.length;i++){\n        if (this.list[i].selected) {\n          let goods_json = await this.$get(\"~/api/goods/get_obj?\", {\"goods_id\": this.list[i].goods_id});\n            if (goods_json.result && goods_json.result.obj) {\n              if (this.list[i].num>goods_json.result.obj.inventory){\n                flag = true\n                this.$toast(\"库存不足\");\n                break;\n              }\n            }\n        }\n      }\n      if (flag){\n        return;\n      }\n      //生成订单号\n      var order_number = this.order_code();\n      // 获取联系方式\n      this.$get(\n              \"~/api/address/get_obj?\",\n              {\n                user_id:this.$store.state.user.user_id,\n                default: 1,\n              },\n              (res) => {\n                if (res.result && res.result.obj) {\n                  console.log(res.result);\n                  // 选出选中的物品\n                  var list_settle = this.list.map(async (o, i) => {\n                    if (o.selected) {\n                      await this.settle_one(o, i, order_number,res.result);\n                      this.$router.push(\"/order/details?order_number=\" + order_number);\n                    }\n                  });\n                  this.$toast(\"加入订单成功\");\n                } else {\n                  this.$toast(\"地址未添加\");\n                  return;\n                }\n              }\n      );\n    },\n    /**\n     * 判断是否在微信小程序\n     * @return { Boolean }\n     */\n    is_wx_env() {\n      // 判断是否在微信小程序中打开\n      var ua = window.navigator.userAgent.toLowerCase();\n      let that = this;\n      var bool = false;\n      if (ua.match(/MicroMessenger/i) == \"micromessenger\") {\n        //判断是否是微信环境\n        //微信环境下\n      }\n      return bool;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.ellipsis_2 {\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n.cart_block {\n  min-height: 580px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n.list_cart {\n  margin: 5px 5px;\n  background-color: #fff;\n  border-radius: 1rem;\n  margin-bottom: 5rem;\n}\n\n.list_cart .item_cart {\n  display: flex;\n  justify-content: start;\n  align-items: center;\n  padding: 0.6rem;\n}\n\n.list_cart .item_cart + .item_cart {\n  border-top: 1px solid #eee;\n}\n\n.list_cart .choose_btn {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.list_cart .choose_btn .circle {\n  width: 1rem;\n  height: 1rem;\n  border-radius: 50%;\n}\n\n.list_cart .choose_btn .btn_circle {\n  display: inline-block;\n  width: 0.9rem;\n  height: 0.9rem;\n  margin-right: 0.5rem;\n  border-radius: 50%;\n  border: 1px solid var(--color_grey);\n  cursor: pointer;\n}\n.list_cart .choose_btn .btn_circle .icon_wrap {\n  color: #fff;\n  position: relative;\n  top: -1px;\n}\n.list_cart .choose_btn.active {\n  color: var(--color_primary);\n}\n\n.list_cart .choose_btn.active .btn_circle {\n  background-color: var(--color_primary);\n  border: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.list_cart .cart_body {\n  display: flex;\n  justify-content: space-between;\n  align-items: stretch;\n  width: 90%;\n}\n.list_cart .cart_body .img_block {\n  width: 200px;\n  min-height: 100px;\n  max-height: 200px;\n}\n.list_cart .cart_body .img_block img {\n  width: 100%;\n  height: 100%;\n}\n.list_cart .right_info {\n  width: calc(100% - 4.5rem);\n  padding-left: 0.6rem;\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n  flex-direction: column;\n}\n\n.list_cart .title {\n  font-size: 0.6rem;\n  width: 85%;\n  margin-top: 15px;\n}\n\n.list_cart .btn_del {\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 2.2rem;\n  height: 2.2rem;\n  line-height: 2.2rem;\n  text-align: center;\n  cursor: pointer;\n  border: 1px solid var(--color_default);\n  border-radius: 5px;\n  font-size: 18px;\n  background: var(--color_default);\n}\n.icon_del {\n  color: white;\n}\n.list_cart .btn_del:hover {\n  background: var(--color_primary_b);\n  border-color: var(--color_primary_b);\n}\n.list_cart .bottom_price {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 15px;\n}\n\n.list_cart .price {\n  color: var(--color_red);\n  font-weight: bold;\n  font-size: 1rem;\n}\n\n.list_cart .price_ago {\n  margin-left: 0.2em;\n  text-decoration: line-through;\n  font-size: 0.7rem;\n  color: #999;\n}\n\n.list_cart .handle_num {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  cursor: pointer;\n}\n\n.list_cart .handle_num > div {\n  height: 25px;\n  width: 25px;\n  text-align: center;\n  margin-left: 10px;\n}\n\n.list_cart .subtract,\n.add {\n  border: 1px solid #eee;\n  border-radius: 50%;\n  color: #919191;\n  background-color: #eee;\n}\n\n.list_cart .handle_num span {\n  position: relative;\n  top: -1px;\n}\n\n.list_cart .handle_num .num {\n  width: 1.4rem;\n}\n\n.bar_settle {\n  width: 100%;\n  height: 2.5rem;\n  background-color: #fff;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 0.8rem;\n  border-top: 1px solid #eee;\n}\n\n.bar_settle .choose_btn {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n}\n\n.bar_settle .choose_btn .circle {\n  width: 1rem;\n  height: 1rem;\n  border-radius: 50%;\n}\n\n.bar_settle .choose_btn .btn_circle {\n  display: inline-block;\n  width: 0.9rem;\n  height: 0.9rem;\n  margin-right: 0.5rem;\n  border-radius: 50%;\n  border: 1px solid var(--color_grey);\n}\n\n.bar_settle .choose_btn.active {\n  color: var(--color_primary);\n}\n\n.bar_settle .choose_btn.active .btn_circle {\n  background-color: var(--color_primary);\n  border: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.bar_settle .right_settle {\n  display: flex;\n  justify-content: space-between;\n}\n\n.bar_settle .sum_block {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-right: 0.5rem;\n}\n\n.bar_settle .sum {\n  color: var(--color_red);\n}\n\n.bar_settle .settle {\n  display: flex;\n  align-items: center;\n}\n\n.bar_settle .btn_settle {\n  color: #fff;\n  border-radius: 5rem;\n  background-color: var(--color_red);\n}\n\n.bar_settle .button-hover {\n  opacity: 0.8;\n}\n</style>\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!./list_cart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!./list_cart.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./list_cart.vue?vue&type=template&id=3142ec1f&scoped=true&\"\nimport script from \"./list_cart.vue?vue&type=script&lang=js&\"\nexport * from \"./list_cart.vue?vue&type=script&lang=js&\"\nimport style0 from \"./list_cart.vue?vue&type=style&index=0&id=3142ec1f&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.10.0@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3142ec1f\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"page_cart\" id=\"cart_index\">\n    <div class=\"warp\">\n      <div class=\"container\">\n        <div class=\"row\">\n          <div class=\"col\">\n            <div class=\"card\">\n              <h4>我的购物车</h4>\n              <list_cart :list=\"list\"></list_cart>\n            </div>\n            <button @click=\"del()\">删除</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport mixin from \"@/mixins/page.js\";\nimport list_cart from \"@/components/diy/list_cart.vue\";\nexport default {\n  mixins: [mixin],\n  components: {\n    list_cart,\n  },\n  data() {\n    return {\n      url_get_list: \"~/api/cart/get_list?\",\n      list: [],\n      query: {\n        page: 1,\n        size: 10\n      },\n      list_cart_type: [],\n    };\n  },\n  methods: {\n    get_list_before(param) {\n      param.user_id = this.user.user_id\n      return param\n    },\n    /**\n     * 获取评论后\n     * @param {Object} json 响应对象\n     */\n    get_list_after(json) {\n      return json.result.list.map((o) => {\n        o.selected = false;\n      });\n    },\n    del() {\n      // this.$axios.delete(\"http://cs.chengduziyi.com/api/cart/del\", {\n      //   headers: {\n      //     'x-auth-token': this.$store.state.user.token\n      //   },\n      //   params: {\n      //     cart_id: 88\n      //   }\n      // });\n      // $.ajax({\n      //   type : \"DELETE\", //请求方式\n      //   async: false, // fasle表示同步请求，true表示异步请求\n      //   contentType: \"application/json;charset=UTF-8\", //请求的媒体类型\n      //   url : \"http://cs.chengduziyi.com/api/cart/del\",//请求地址\n      //   headers: {\n      //     'x-auth-token': this.$store.state.user.token\n      //   },\n      //   data : {\n      //     cart_id: 90\n      //   }, //数据，json字符串\n      //   success : function(result) { //请求成功\n      //     console.log(result);\n      //   },\n      //   error : function(e){  //请求失败，包含具体的错误信息\n      //     console.log(e.status);\n      //     console.log(e.responseText);\n      //   }\n      // });\n      for (let i=0;i<this.list.length;i++){\n        if (this.list[i].selected) {\n          this.$get(`~/api/cart/del?cart_id=${this.list[i].cart_id}`, {}, (res) => {\n            this.list.splice(i, 1);\n            i--;\n          });\n        }\n      }\n    },\n  }\n}\n</script>\n\n<style scoped>\n.page_cart {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n.container {\n  min-height: 800px;\n}\n.card {\n  padding: 5px;\n}\n.filter_block {\n  display: flex;\n  flex-direction: row;\n  justify-content: start;\n  margin-bottom: 10px;\n}\n.bar_filter {\n  display: flex;\n  align-items: center;\n}\nli {\n  list-style: none;\n}\n.bar_sort {\n  margin-left: 5px;\n}\n</style>\n\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./list.vue?vue&type=template&id=16cc0548&scoped=true&\"\nimport script from \"./list.vue?vue&type=script&lang=js&\"\nexport * from \"./list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./list.vue?vue&type=style&index=0&id=16cc0548&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.10.0@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"16cc0548\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/_vue-loader@15.10.0@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!./list_cart.vue?vue&type=style&index=0&id=3142ec1f&prod&scoped=true&lang=css&\""],"sourceRoot":""}