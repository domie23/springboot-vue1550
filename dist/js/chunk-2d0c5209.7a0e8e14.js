(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c5209"],{"3e89":function(e,s,a){"use strict";a.r(s);var t=function(){var e=this,s=e._self._c;return s("div",{staticClass:"diy_edit page_message_feedback",attrs:{id:"message_feedback_edit"}},[s("div",{staticClass:"warp"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row diy_edit_content_box"},[e.$check_field("set","ordinary_users")||e.$check_field("add","ordinary_users")||e.$check_field("get","ordinary_users")?s("div",{staticClass:"form-item col-12 col-md-6"},[e._m(0),s("div",{staticClass:"diy_field diy_down"},[e.form["ordinary_users"]&&e.$check_field("set","ordinary_users")||!e.form["ordinary_users"]&&e.$check_field("add","ordinary_users")?s("select",{directives:[{name:"model",rawName:"v-model",value:e.form["ordinary_users"],expression:"form['ordinary_users']"}],attrs:{id:"form_ordinary_users",disabled:e.disabledObj["ordinary_users_isDisabled"]},on:{change:function(s){var a=Array.prototype.filter.call(s.target.options,(function(e){return e.selected})).map((function(e){var s="_value"in e?e._value:e.value;return s}));e.$set(e.form,"ordinary_users",s.target.multiple?a:a[0])}}},e._l(e.list_user_ordinary_users,(function(a){return s("option",{domProps:{value:a["user_id"]}},[e._v(" "+e._s(a["nickname"]+"-"+a["username"])+" ")])})),0):e.$check_field("get","ordinary_users")?s("span",[e._v(e._s(e.form["ordinary_users"]))]):e._e()])]):e._e(),e.$check_field("set","user_name")||e.$check_field("add","user_name")||e.$check_field("get","user_name")?s("div",{staticClass:"form-item col-12 col-md-6"},[e._m(1),s("div",{staticClass:"diy_field diy_text"},[e.form["user_name"]&&e.$check_field("set","user_name")||!e.form["user_name"]&&e.$check_field("add","user_name")?s("input",{directives:[{name:"model",rawName:"v-model",value:e.form["user_name"],expression:"form['user_name']"}],attrs:{type:"text",id:"form_user_name",placeholder:"请输入用户姓名",disabled:e.disabledObj["user_name_isDisabled"]},domProps:{value:e.form["user_name"]},on:{input:function(s){s.target.composing||e.$set(e.form,"user_name",s.target.value)}}}):e.$check_field("get","user_name")?s("span",[e._v(e._s(e.form["${obj.name}"]))]):e._e()])]):e._e(),e.$check_field("set","message_content")||e.$check_field("add","message_content")||e.$check_field("get","message_content")?s("div",{staticClass:"form-item col-12 col-md-6"},[e._m(2),s("div",{staticClass:"diy_field diy_desc"},[e.form["message_content"]&&e.$check_field("set","message_content")||!e.form["message_content"]&&e.$check_field("add","message_content")?s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form["message_content"],expression:"form['message_content']"}],attrs:{id:"form_message_content",disabled:e.disabledObj["message_content_isDisabled"]},domProps:{value:e.form["message_content"]},on:{input:function(s){s.target.composing||e.$set(e.form,"message_content",s.target.value)}}}):e.$check_field("get","message_content")?s("span",[e._v(e._s(e.form["${obj.name}"]))]):e._e()])]):e._e(),e.$check_field("set","message_date")||e.$check_field("add","message_date")||e.$check_field("get","message_date")?s("div",{staticClass:"form-item col-12 col-md-6"},[e._m(3),s("div",{staticClass:"diy_field diy_date"},[e.form["message_date"]&&e.$check_field("set","message_date")||!e.form["message_date"]&&e.$check_field("add","message_date")?s("input",{directives:[{name:"model",rawName:"v-model",value:e.form["message_date"],expression:"form['message_date']"}],attrs:{type:"date",disabled:e.disabledObj["message_date_isDisabled"],id:"form_message_date",placeholder:"请输入留言日期"},domProps:{value:e.form["message_date"]},on:{input:function(s){s.target.composing||e.$set(e.form,"message_date",s.target.value)}}}):e.$check_field("get","message_date")?s("span",[e._v(e._s(e.form["${obj.name}"]))]):e._e()])]):e._e(),"管理员"===e.user_group||e.$check_examine()?s("div",{staticClass:"form-item col-12 col-md-6"},[e._m(4),e.$check_action("/message_feedback/edit","examine")?s("div",{staticClass:"diy_field diy_select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.form["examine_state"],expression:"form['examine_state']"}],on:{change:function(s){var a=Array.prototype.filter.call(s.target.options,(function(e){return e.selected})).map((function(e){var s="_value"in e?e._value:e.value;return s}));e.$set(e.form,"examine_state",s.target.multiple?a:a[0])}}},[s("option",{attrs:{value:"未审核"}},[e._v(" 未审核 ")]),s("option",{attrs:{value:"已通过"}},[e._v(" 已通过 ")]),s("option",{attrs:{value:"未通过"}},[e._v(" 未通过 ")])])]):s("div",{staticClass:"diy_field diy_text"},[s("span",[e._v(" "+e._s(e.form["examine_state"])+" ")])])]):e._e(),"管理员"===e.user_group||e.$check_examine()?s("div",{staticClass:"form-item col-12 col-md-6"},[e._m(5),e.$check_action("/message_feedback/edit","examine")?s("div",{staticClass:"diy_field diy_desc"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form["examine_reply"],expression:"form['examine_reply']"}],domProps:{value:e.form["examine_reply"]},on:{input:function(s){s.target.composing||e.$set(e.form,"examine_reply",s.target.value)}}})]):s("div",{staticClass:"diy_field diy_text"},[s("span",[e._v(" "+e._s(e.form["examine_reply"])+" ")])])]):e._e()]),s("div",{staticClass:"diy_edit_submit_box row"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"btn_box"},[s("button",{staticClass:"btn_submit",on:{click:function(s){return e.submit()}}},[e._v("提交")])])])])])])])},r=[function(){var e=this,s=e._self._c;return s("div",{staticClass:"diy_title"},[s("span",[e._v(" 普通用户: ")])])},function(){var e=this,s=e._self._c;return s("div",{staticClass:"diy_title"},[s("span",[e._v(" 用户姓名: ")])])},function(){var e=this,s=e._self._c;return s("div",{staticClass:"diy_title"},[s("span",[e._v(" 留言内容: ")])])},function(){var e=this,s=e._self._c;return s("div",{staticClass:"diy_title"},[s("span",[e._v(" 留言日期: ")])])},function(){var e=this,s=e._self._c;return s("div",{staticClass:"diy_title"},[s("span",[e._v(" 审核状态: ")])])},function(){var e=this,s=e._self._c;return s("div",{staticClass:"diy_title"},[s("span",[e._v(" 审核回复: ")])])}],i=a("c6e7"),_={mixins:[i["a"]],components:{},data(){return{url_get_obj:"~/api/message_feedback/get_obj?",url_add:"~/api/message_feedback/add?",url_set:"~/api/message_feedback/set?",oauth:{signIn:!0,user_group:[]},query:{ordinary_users:0,user_name:"",message_content:"",message_date:"",message_feedback_id:0},obj:{ordinary_users:0,user_name:"",message_content:"",message_date:(new Date).getTime(),examine_state:"未审核",examine_reply:"",message_feedback_id:0},form:{ordinary_users:0,user_name:"",message_content:"",message_date:(new Date).getTime(),examine_state:"未审核",examine_reply:"",message_feedback_id:0},disabledObj:{ordinary_users_isDisabled:!1,user_name_isDisabled:!1,message_content_isDisabled:!1,message_date_isDisabled:!1},list_user_ordinary_users:[],field:"message_feedback_id"}},methods:{async get_list_user_ordinary_users(){var e=await this.$get("~/api/user/get_list?user_group=普通用户");e.result&&e.result.list?this.list_user_ordinary_users=e.result.list:e.error&&console.error(e.error)},async get_user_session_ordinary_users(){var e=this,s=await this.$get("~/api/user_group/get_obj?name=普通用户");if(s.result&&s.result.obj){var a=s.result.obj.source_table,t=e.$store.state.user.user_id;if(t){var r="~/api/"+a+"/get_obj?";this.$get(r,{user_id:e.$store.state.user.user_id},(function(s){if(s.result&&s.result.obj){var a=[];for(let e in s.result.obj)a.push(e);var r=[];for(let s in e.form)r.push(s);e.form["ordinary_users"]=t,e.disabledObj["ordinary_users_isDisabled"]=!0;for(var i=0;i<a.length;i++)if("examine_state"!==a[i]&&"examine_reply"!==a[i])for(var _=0;_<r.length;_++)if(a[i]===r[_]&&"ordinary_users"!==a[i]){e.form[r[_]]=s.result.obj[a[i]],e.disabledObj[r[_]+"_isDisabled"]=!0;break}}}))}}else s.error&&console.error(s.error)},change_file(e,s){var a=new FormData;a.append("file",e[0]),this.$post("~/api/message_feedback/upload?",a,e=>{e.result?this.form[s]=e.result.url:e.error&&this.$toast(e.error.message)})},get_obj_before(e){var s=$.db.get("form");if(s){var a=[];for(let e in s)a.push(e);var t=[];for(let e in this.form)t.push(e);for(var r=0;r<a.length;r++)if("examine_state"!==a[r]&&"examine_reply"!==a[r])for(var i=0;i<t.length;i++)if(t[i]===a[r]){this.form[t[i]]=s[a[r]],this.obj[t[i]]=s[a[r]],this.disabledObj[t[i]+"_isDisabled"]=!0;break}}return-1===JSON.stringify(this.form["message_date"]).indexOf("-")&&(this.form["message_date"]=this.$toTime(parseInt(this.form["message_date"]),"yyyy-MM-dd")),$.db.del("form"),e},get_obj_after(e,s){s&&s(e)}},created(){this.get_user_session_ordinary_users(),this.get_list_user_ordinary_users()}},d=_,o=a("0b56"),n=Object(o["a"])(d,t,r,!1,null,null,null);s["default"]=n.exports}}]);
//# sourceMappingURL=chunk-2d0c5209.7a0e8e14.js.map