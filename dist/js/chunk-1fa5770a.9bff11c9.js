(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1fa5770a"],{"0f4e":function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"page_goods",attrs:{id:"goods_list"}},[t.$check_action("/goods/list","get")?s("div",{staticClass:"warp"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row page_goods_list_wrap"},[s("div",{staticClass:"col-12 col-lg-10 col-md-12 page_goods_list_base"},[s("div",{staticClass:"card_goods_list"},[s("div",{staticClass:"good_list_title"},[s("span",{staticClass:"title"},[t._v("商品列表")]),s("div",{staticClass:"search_box"},[s("b-form-input",{staticClass:"mr-sm-2",attrs:{size:"sm",placeholder:"局部搜索"},on:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.submit_search.apply(null,arguments)}},model:{value:t.search_val,callback:function(s){t.search_val="string"===typeof s?s.trim():s},expression:"search_val"}}),s("b-button",{attrs:{size:"sm"},on:{click:t.submit_search}},[s("b-icon",{attrs:{icon:"search"}})],1)],1)]),s("div",{staticClass:"filter_block"},[s("div",{staticClass:"bar_filter"},[s("b-dropdown",{attrs:{text:t.title,variant:"outline-dark",left:""}},t._l(t.list_goods_type,(function(e,i){return s("b-dropdown-item",{key:i,on:{click:function(s){return t.filter_goods(e)}}},[t._v(" "+t._s(e)+" ")])})),1)],1),s("div",{staticClass:"bar_sort",class:{active:"`hits` desc"==t.query.orderby}},[s("b-dropdown",{attrs:{text:"排序",variant:"outline-dark",left:""}},t._l(t.sort_list,(function(e,i){return s("b-dropdown-item",{key:i,on:{click:function(s){return t.sort_goods(e)}}},[t._v(" "+t._s(e.name)+" ")])})),1)],1)]),s("list_goods",{attrs:{list:t.list}})],1),s("div",{staticClass:"col overflow-auto flex_cc"},[s("b-pagination",{attrs:{"total-rows":t.count,"per-page":t.query.size},on:{change:t.goToPage},model:{value:t.query.page,callback:function(s){t.$set(t.query,"page",s)},expression:"query.page"}})],1)]),s("div",{staticClass:"col-12 col-lg-2 page_goods_list_hot"},[s("div",{staticClass:"card_list_hot"},[s("div",{staticClass:"hot_title"},[t._v(" 商品热门列表 ")]),s("list_goods_hot",{attrs:{list:t.list_hot}})],1)])]),s("div",{staticClass:"row"})])]):t._e()])},a=[],o=e("c6e7"),l=e("1da7"),r=e("958b"),c={mixins:[o["a"]],components:{list_goods:l["a"],list_goods_hot:r["a"]},data(){return{url_get_list:"~/api/goods/get_list?",query:{page:1,size:12},list_hot:[],list_goods_type:[],title:"",sort_list:[{name:"价格从高到低",value:"price desc"},{name:"价格从低到高",value:"price asc"},{name:"更新时间从高到低",value:"create_time desc"},{name:"更新时间从低到高",value:"create_time asc"},{name:"销量从高到低",value:"sales desc"},{name:"销量从低到高",value:"sales asc"}],search_val:""}},methods:{get_hot_goods(){this.$get("~/api/goods/get_list",{page:1,size:5,orderby:"hits"},t=>{t.result&&(this.list_hot=t.result.list)})},submit_search(){this.$router.push({path:"/search/details",query:{word:this.search_val,search_key:"title",search_type:"goods",search_title:"商品"}})},get_goods_type(){this.$get("~/api/goods_type/get_list",{},t=>{t.result&&(this.list_goods_type.push("全部"),t.result.list.map(t=>this.list_goods_type.push(t.name)))})},filter_goods(t){this.query.type="全部"==t?0:t,this.search()},sort_goods(t){console.log("asd",t),this.query.orderby=t.value,this.search()},goToPage(t){this.query.page=t,this.goToNew(t)}},mounted(){this.title="筛选",this.get_hot_goods(),this.get_goods_type()}},d=c,n=(e("2776"),e("0b56")),_=Object(n["a"])(d,i,a,!1,null,"1b0780dd",null);s["default"]=_.exports},2776:function(t,s,e){"use strict";e("b0ca")},"958b":function(t,s,e){"use strict";var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"list_goods_hot"},[s("div",{staticClass:"card_goods_list list list-x"},t._l(t.list,(function(e,i){return s("div",{key:i,staticClass:"goods"},[s("router-link",{staticClass:"goods_nav",attrs:{to:{path:"/goods/details",query:{goods_id:e[t.vm.goods_id]}}}},[s("div",{staticClass:"media"},[s("img",{directives:[{name:"default-img",rawName:"v-default-img",value:"/img/default.png",expression:"'/img/default.png'"}],attrs:{src:e[t.vm.img]?t.$fullUrl(e[t.vm.img]):"/img/default.png",alt:"图片丢失"}})]),s("div",{staticClass:"good_bottom"},[s("div",{staticClass:"title"},[t._v(t._s(e[t.vm.title]))]),s("div",{staticClass:"price_block"},[s("span",{staticClass:"price"},[t._v("￥"+t._s(e[t.vm.price]))]),s("span",{staticClass:"price_ago"},[t._v("￥"+t._s(e[t.vm.price_ago]))])])])])],1)})),0)])},a=[],o={props:{url:{type:String,default:"/pages/goods/details?goods_id="},list:{type:Array,default:function(){return[]}},vm:{type:Object,default:function(){return{goods_id:"goods_id",img:"img",title:"title",price:"price",price_ago:"price_ago"}}},span:{type:Number,default:2}},data(){var t=12/this.span;return{col:t}},methods:{},components:{}},l=o,r=(e("a89c"),e("0b56")),c=Object(r["a"])(l,i,a,!1,null,"1dd9891b",null);s["a"]=c.exports},a89c:function(t,s,e){"use strict";e("d432")},b0ca:function(t,s,e){},d432:function(t,s,e){}}]);
//# sourceMappingURL=chunk-1fa5770a.9bff11c9.js.map